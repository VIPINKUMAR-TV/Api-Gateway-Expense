# ===============================
# BASIC CONFIG
# ===============================
spring.application.name=api-gateway
server.port=8080
spring.profiles.active=prod

spring.main.web-application-type=reactive
spring.cloud.compatibility-verifier.enabled=false

# Disable security auto config (you are handling JWT manually)
spring.security.enabled=false
spring.autoconfigure.exclude=\
org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration,\
org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,\
org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration


# ===============================
# GATEWAY ROUTES
# ===============================

# Category Service
spring.cloud.gateway.routes[0].id=category-service
spring.cloud.gateway.routes[0].uri=https://categoryservice.onrender.com
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/categories/**

# Day Service
spring.cloud.gateway.routes[1].id=day-service
spring.cloud.gateway.routes[1].uri=https://dayservice.onrender.com
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/days/**

# Auth Service
spring.cloud.gateway.routes[2].id=auth-service
spring.cloud.gateway.routes[2].uri=https://authservice.onrender.com
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/auth/**


# ===============================
# CORS CONFIG (SAFE FOR JWT)
# ===============================
spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedOrigins=https://your-angular-app.vercel.app
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].exposedHeaders=Authorization,Content-Type
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowCredentials=true


# ===============================
# JWT CONFIG
# ===============================
jwt.secret=mysupersecretkey_1234567890_ABCDEFGHIJKLMNOPQRSTUVWXYZ_0987654321_superlongkey
jwt.expiration=86400000




#spring.application.name=api-gateway
#server.port=8080

#spring.cloud.compatibility-verifier.enabled=false

#spring.main.web-application-type=reactive
#spring.security.enabled=false

#spring.autoconfigure.exclude=\
#org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration,\
#org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,\
#org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration


# ===============================
# ROUTES (NEW SPRING 2023+ KEYS)
# ===============================

# Category Service
##spring.cloud.gateway.routes[0].id=category-service
##spring.cloud.gateway.routes[0].uri=http://category-service:8082
##spring.cloud.gateway.routes[0].predicates[0]=Path=/api/categories/{*path}
####spring.cloud.gateway.server.webflux.routes[0].predicates[0]=Path=/api/categories/**

# Day Service
##spring.cloud.gateway.routes[1].id=day-service
##spring.cloud.gateway.routes[1].uri=http://day-service:8081
##spring.cloud.gateway.routes[1].predicates[0]=Path=/api/days/{*path}
####spring.cloud.gateway.server.webflux.routes[1].predicates[0]=Path=/api/days/**

# Auth Service
##spring.cloud.gateway.routes[2].id=auth-service
##spring.cloud.gateway.routes[2].uri=http://auth-service:8083
##spring.cloud.gateway.routes[2].predicates[0]=Path=/api/auth/{*path}
####spring.cloud.gateway.server.webflux.routes[2].predicates[0]=Path=/api/auth/**

# ===============================
# CORS (NEW SPRING 2023+ KEYS)
# ===============================
#spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping=true
#spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedOriginPatterns=*
#spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS
#spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedHeaders=*
#spring.cloud.gateway.globalcors.cors-configurations.[/**].exposedHeaders=Authorization,Content-Type
#spring.cloud.gateway.globalcors.cors-configurations.[/**].allowCredentials=true
# ===============================
# JWT CONFIG (USED IN FILTER)
# ===============================
#jwt.secret=mysupersecretkey_1234567890_ABCDEFGHIJKLMNOPQRSTUVWXYZ_0987654321_superlongkey
#jwt.expiration=86400000